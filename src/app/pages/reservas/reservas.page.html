<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>reservas</ion-title>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" style="--background: url('assets/images/fondo-login.png') no-repeat center center / cover;">

  <ion-accordion-group>
    <ion-accordion value="crear_reserva" (click)="initMap()" *ngIf="usuario.tiene_equipo=='si'">
      <ion-item slot="header" color="light">
        <ion-label>Crear reserva</ion-label>
      </ion-item>
      <div class="ion-padding" slot="content">
        <!--Mapa-->
        <div id="map_html"></div>
        <!--Formulario para crear un viaje-->
        <form [formGroup]="viaje" (ngSubmit)="crearViaje()">
          <ion-input type="number" labelPlacement="stacked" label="Asientos disp." formControlName="asientos_disp"></ion-input>
          <ion-input type="number" labelPlacement="stacked" label="Valor" formControlName="valor"></ion-input>
          <ion-input labelPlacement="stacked" label="Destino" formControlName="nombre_destino"></ion-input>
          <ion-input labelPlacement="stacked" label="Distancia (metros)" formControlName="distancia_metros"></ion-input>
          <ion-input type="number" labelPlacement="stacked" label="Minutos" formControlName="tiempo_minutos"></ion-input>
          <ion-button [disabled]="viaje.invalid" type="submit" size="block">Crear viaje</ion-button>
        </form>
      </div>
    </ion-accordion>
    <ion-accordion value="reservas">
      <ion-item slot="header" color="light">
        <ion-label>Reservas</ion-label>
      </ion-item>
      <div class="ion-padding" slot="content">
        <ion-list *ngFor="let v of viajes">
          <ion-item>
            <ion-label>
              <strong>{{v.nombre_destino}}</strong><br />
              <ion-note color="medium" class="ion-text-wrap">
                Asientos disponibles: {{v.asientos_disp}}
              </ion-note>
            </ion-label>
            <div class="metadata-end-wrapper" slot="end">
              <ion-note color="medium">{{v.valor | currency}}</ion-note>
            </div>
          </ion-item>

        </ion-list>
      </div>
    </ion-accordion>
  </ion-accordion-group>

</ion-content>
